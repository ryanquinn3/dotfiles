USE_PYENV=0
# File to be included when running locally on macos
alias ls="eza"
alias cat="bat"

export DOTFILES=$HOME/repos/dotfiles
export EDITOR='subl -w'



# GH autocompletion
eval "$(gh completion -s zsh)"

# disable mouse reporting
function fix_mouse(){
  print -n -- $'\e[?1000l\e[?1002l\e[?1003l\e[?1006l\e[?1015l'
}

alias fm="fix_mouse"

cs_ssh() {

  gh codespace ssh --codespace $(current_codespace) -- -t "tmux new-session -A -s main"
  local ec=$?
  [[ -t 1 ]] && print -n -- $'\e[?1000l\e[?1002l\e[?1003l\e[?1006l\e[?1015l'
  return $ec
}

ona_ssh() {
  gitpod_env=$( gitpod config context list -f Environment)
  if [[ -z "$gitpod_env" ]]; then
    echo "No active Gitpod environments in context. Set one with gitpod config context modify default --environment-id $ENV"
    return 1
  fi
  
  if [[ $(gitpod env get -f phase) != "running" ]]; then
    echo "Starting Gitpod environment..."
    gitpod env start
  fi

  gitpod_host="${gitpod_env}.gitpod.environment"
  echo "Connecting to ${gitpod_host}..."
  # Connect via SSH and attach to main tmux session
  ssh "${gitpod_host}" -t tmux new-session -A -s main
  # When ssh session ends, disable mouse reporting so that terminal behaves correctly
  local ec=$?
  [[ -t 1 ]] && print -n -- $'\e[?1000l\e[?1002l\e[?1003l\e[?1006l\e[?1015l'
  return $ec
}

push(){
  if [[ -z "$1" ]]; then
    echo "Usage: push <commit-message>"
    return 1
  fi
  gacm "$1"
  gp
}
